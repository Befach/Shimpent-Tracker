(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2599:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return s(4991)}])},7295:function(e,t,s){"use strict";var i=s(6490);let a="https://semzvmdjabbceqvanxbt.supabase.co";console.log("Creating Supabase client with URL:",a);let r=(0,i.eI)(a,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNlbXp2bWRqYWJiY2VxdmFueGJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI1NTg2NzMsImV4cCI6MjA1ODEzNDY3M30.1WVli2iZhMfnXD8HZk5Q7WLLdy9p33tSAGyALoEeq-Q",{auth:{persistSession:!0}});t.Z=r},4991:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var i=s(5893),a=s(7294),r=s(1664),d=s.n(r),l=s(5951),n=s(7295),c=s(2914);function o(){let[e,t]=(0,a.useState)({totalShipments:0,activeShipments:0,deliveredShipments:0}),[s,r]=(0,a.useState)([]),[o,x]=(0,a.useState)(!0),[h,m]=(0,a.useState)("");(0,a.useEffect)(()=>{p()},[]);let p=async()=>{try{x(!0);let{count:e,error:s}=await n.Z.from("shipments").select("*",{count:"exact",head:!0});if(s)throw s;let{count:i,error:a}=await n.Z.from("shipments").select("*",{count:"exact",head:!0}).not("status","eq","Dispatched to Customer Warehouse");if(a)throw a;let{count:d,error:l}=await n.Z.from("shipments").select("*",{count:"exact",head:!0}).eq("status","Dispatched to Customer Warehouse");if(l)throw l;let{data:c,error:o}=await n.Z.from("shipments").select("*").order("created_at",{ascending:!1}).limit(5);if(o)throw o;t({totalShipments:e||0,activeShipments:i||0,deliveredShipments:d||0}),r(c||[])}catch(e){console.error("Error fetching dashboard data:",e),m("Failed to load dashboard data")}finally{x(!1)}};return(0,i.jsxs)(l.Z,{title:"Admin Dashboard",children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)("h1",{className:"text-2xl font-bold",children:"Dashboard"})}),h&&(0,i.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded-lg",children:(0,i.jsx)("p",{children:h})}),o?(0,i.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,i.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden border-l-4 border-blue-500",children:(0,i.jsx)("div",{className:"p-5",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0 bg-blue-100 rounded-full p-3",children:(0,i.jsx)(c.FSC,{className:"h-6 w-6 text-blue-600"})}),(0,i.jsxs)("div",{className:"ml-5",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-700",children:"Total Shipments"}),(0,i.jsx)("div",{className:"mt-1 text-3xl font-semibold text-blue-600",children:e.totalShipments})]})]})})}),(0,i.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden border-l-4 border-yellow-500",children:(0,i.jsx)("div",{className:"p-5",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0 bg-yellow-100 rounded-full p-3",children:(0,i.jsx)(c.C5q,{className:"h-6 w-6 text-yellow-600"})}),(0,i.jsxs)("div",{className:"ml-5",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-700",children:"Active Shipments"}),(0,i.jsx)("div",{className:"mt-1 text-3xl font-semibold text-yellow-600",children:e.activeShipments})]})]})})}),(0,i.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden border-l-4 border-green-500",children:(0,i.jsx)("div",{className:"p-5",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0 bg-green-100 rounded-full p-3",children:(0,i.jsx)(c.FJM,{className:"h-6 w-6 text-green-600"})}),(0,i.jsxs)("div",{className:"ml-5",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-700",children:"Delivered"}),(0,i.jsx)("div",{className:"mt-1 text-3xl font-semibold text-green-600",children:e.deliveredShipments})]})]})})})]}),(0,i.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,i.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Recent Shipments"})}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tracking ID"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origin"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Destination"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===s.length?(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No shipments found"})}):s.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.tracking_id})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"text-sm text-gray-900",children:[e.origin_city,", ",e.origin_country]})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"text-sm text-gray-900",children:[e.destination_city,", ",e.destination_country]})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:e.status})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,i.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,i.jsx)(d(),{href:"/admin/shipments/".concat(e.id),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"View"}),(0,i.jsx)(d(),{href:"/admin/shipments/".concat(e.id,"/edit"),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"})]})]},e.id))})]})}),(0,i.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,i.jsx)(d(),{href:"/admin/shipments",className:"text-indigo-600 hover:text-indigo-900 font-medium",children:"View All Shipments"})})]})]})]})}}},function(e){e.O(0,[445,490,664,675,753,888,774,179],function(){return e(e.s=2599)}),_N_E=e.O()}]);