(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[918],{9634:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/track-new",function(){return s(1154)}])},621:function(e,t,s){"use strict";var n=s(5893),a=s(7294),r=s(1664),i=s.n(r),l=s(5675),c=s.n(l),d=s(2914),o=s(1163);t.Z=()=>{let[e,t]=(0,a.useState)(!1),s=(0,o.useRouter)();return(0,n.jsxs)("nav",{className:"bg-white shadow-md",children:[(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between h-16",children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(i(),{href:"/",className:"flex-shrink-0 flex items-center",children:(0,n.jsx)(c(),{src:"/images/befach-logo.png",alt:"Befach International",width:200,height:60,className:"h-14 w-auto"})})}),(0,n.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,n.jsx)("a",{href:"https://www.befach.com",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 rounded-md text-sm font-medium text-[#5D4037] hover:bg-[#F39C12]/10",children:"Home"}),(0,n.jsx)(i(),{href:"/track-new",className:"px-3 py-2 rounded-md text-sm font-medium ".concat("/track-new"===s.pathname?"bg-[#F39C12] text-white":"text-[#5D4037] hover:bg-[#F39C12]/10"),children:"Track Shipment"}),(0,n.jsx)(i(),{href:"/admin/login",className:"px-3 py-2 rounded-md text-sm font-medium ".concat(s.pathname.startsWith("/admin")?"bg-[#5D4037] text-white":"text-[#5D4037] hover:bg-[#5D4037]/10"),children:"Admin"})]}),(0,n.jsx)("div",{className:"md:hidden flex items-center",children:(0,n.jsx)("button",{onClick:()=>{t(!e)},className:"inline-flex items-center justify-center p-2 rounded-md text-[#5D4037] hover:text-[#F39C12] focus:outline-none",children:e?(0,n.jsx)(d.aHS,{size:24}):(0,n.jsx)(d.Fm7,{size:24})})})]})}),e&&(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[(0,n.jsx)("a",{href:"https://www.befach.com",target:"_blank",rel:"noopener noreferrer",className:"block px-3 py-2 rounded-md text-base font-medium text-[#5D4037] hover:bg-[#F39C12]/10",children:"Home"}),(0,n.jsx)(i(),{href:"/track-new",className:"block px-3 py-2 rounded-md text-base font-medium ".concat("/track-new"===s.pathname?"bg-[#F39C12] text-white":"text-[#5D4037] hover:bg-[#F39C12]/10"),children:"Track Shipment"}),(0,n.jsx)(i(),{href:"/admin/login",className:"block px-3 py-2 rounded-md text-base font-medium ".concat(s.pathname.startsWith("/admin")?"bg-[#5D4037] text-white":"text-[#5D4037] hover:bg-[#5D4037]/10"),children:"Admin"})]})})]})}},7295:function(e,t,s){"use strict";var n=s(6490);let a="https://semzvmdjabbceqvanxbt.supabase.co";console.log("Creating Supabase client with URL:",a);let r=(0,n.eI)(a,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNlbXp2bWRqYWJiY2VxdmFueGJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI1NTg2NzMsImV4cCI6MjA1ODEzNDY3M30.1WVli2iZhMfnXD8HZk5Q7WLLdy9p33tSAGyALoEeq-Q",{auth:{persistSession:!0}});t.Z=r},6771:function(e,t,s){"use strict";s.d(t,{w_:function(){return c}});var n=s(7294),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r=n.createContext&&n.createContext(a),i=function(){return(i=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s};function c(e){return function(t){return n.createElement(d,i({attr:i({},e.attr)},t),function e(t){return t&&t.map(function(t,s){return n.createElement(t.tag,i({key:s},t.attr),e(t.child))})}(e.child))}}function d(e){var t=function(t){var s,a=e.attr,r=e.size,c=e.title,d=l(e,["attr","size","title"]),o=r||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),n.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:s,style:i(i({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),c&&n.createElement("title",null,c),e.children)};return void 0!==r?n.createElement(r.Consumer,null,function(e){return t(e)}):t(a)}},1154:function(e,t,s){"use strict";s.r(t);var n=s(5893),a=s(7294),r=s(9008),i=s.n(r),l=s(7295),c=s(621),d=s(2914);t.default=()=>{var e;let[t,s]=(0,a.useState)(""),[r,o]=(0,a.useState)(null),[m,x]=(0,a.useState)(!1),[h,u]=(0,a.useState)(""),[g,p]=(0,a.useState)([]),[f,j]=(0,a.useState)([]),[N,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(0),w=(0,a.useRef)(null),_=async e=>{if(e.preventDefault(),!t.trim()){u("Please enter a tracking number");return}x(!0),u(""),o(null);try{console.log("Searching for tracking ID:",t);let{data:e,error:s}=await l.Z.from("shipments").select("*").eq("tracking_id",t).single();if(console.log("Query result:",{data:e,error:s}),s){console.error("Error fetching shipment:",s),u("Error: ".concat(s.message));return}if(!e){u("No shipment found with this tracking number");return}console.log("Shipment found:",e),o(e)}catch(e){console.error("Tracking error:",e),u("Failed to track shipment. Please try again.")}finally{x(!1)}},k=()=>{if(!r)return new Date;if(r.estimated_delivery)return new Date(r.estimated_delivery);let e=new Date(r.created_at),t=new Date(e);return r.transport_mode&&r.transport_mode.toLowerCase().includes("air")?t.setDate(e.getDate()+15):r.transport_mode&&r.transport_mode.toLowerCase().includes("sea")?t.setDate(e.getDate()+45):t.setDate(e.getDate()+30),t},S=e=>e.startsWith("image/")?(0,n.jsx)(d.H3h,{className:"text-blue-600 mr-3"}):e.includes("pdf")?(0,n.jsx)(d.yRW,{className:"text-red-600 mr-3"}):e.includes("word")||e.includes("doc")?(0,n.jsx)(d.baU,{className:"text-blue-800 mr-3"}):e.includes("excel")||e.includes("sheet")||e.includes("xls")?(0,n.jsx)(d.GzT,{className:"text-green-600 mr-3"}):(0,n.jsx)(d.pPO,{className:"text-gray-600 mr-3"}),C=async(e,t)=>{try{let{error:t}=await l.Z.from("shipment_media").select("id").limit(1);if(t&&t.message.includes("does not exist")){console.log("shipment_media table does not exist yet"),p([]);return}let{data:s,error:n}=await l.Z.from("shipment_media").select("*").eq("shipment_id",e);if(n){if(n.message.includes("does not exist"))console.log("Stage column may not exist in shipment_media table"),p([]);else throw n}else p(s||[])}catch(e){console.error("Error fetching stage media:",e),p([])}},D=async e=>{try{let{error:t}=await l.Z.from("shipment_documents").select("id").limit(1);if(t&&t.message.includes("does not exist")){console.log("shipment_documents table does not exist yet"),j([]);return}let{data:s,error:n}=await l.Z.from("shipment_documents").select("*").eq("shipment_id",e);if(n)throw n;j(s||[])}catch(e){console.error("Error fetching shipment documents:",e),j([])}},I=()=>{if(!r)return 0;let e=r.status,t=E.findIndex(t=>t===e);return t>=0?t:0};(0,a.useEffect)(()=>{r&&(C(r.id,r.status),D(r.id),v(I()))},[r]);let E=["Product Insurance","Supplier Payment","Packaging Approval from Customer","Pickup at Origin","In Transit to India","Pending Customer Clearance","Customs Clearance","Dispatch to Befach Warehouse","Dispatch to Customer Warehouse"];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:"Track Your Shipment | ShipTrack"})}),(0,n.jsx)(c.Z,{}),(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Shipment #",r.tracking_id]}),(0,n.jsxs)("p",{className:"text-gray-600",children:["Current Status: ",(0,n.jsx)("span",{className:"font-medium",children:r.status})]})]}),(0,n.jsxs)("button",{onClick:()=>{o(null),u(""),s("")},className:"flex items-center text-blue-600 hover:text-blue-800",children:[(0,n.jsx)(d.x_l,{className:"mr-2"}),(0,n.jsx)("span",{children:"Track Another Shipment"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Shipment Summary"}),(0,n.jsxs)("div",{className:"flex items-center text-gray-600 mb-4",children:[(e=>{if(!e)return(0,n.jsx)(d.Hzt,{size:20});let t=e.toLowerCase();return t.includes("air")||t.includes("plane")?(0,n.jsx)(d.NqP,{size:20}):t.includes("sea")||t.includes("ship")?(0,n.jsx)(d.SsO,{size:20}):t.includes("rail")||t.includes("train")?(0,n.jsx)(d._vO,{size:20}):(0,n.jsx)(d.Hzt,{size:20})})(r.transport_mode),(0,n.jsx)("span",{className:"ml-2",children:r.transport_mode||"Standard Shipping"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"From"}),(0,n.jsxs)("p",{className:"font-medium",children:[r.origin_city,", ",r.origin_country]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"To"}),(0,n.jsxs)("p",{className:"font-medium",children:[r.destination_city,", ",r.destination_country]})]})]}),(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,n.jsx)("span",{children:(e=r.created_at)?new Date(e).toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"}):"N/A"}),(0,n.jsx)("span",{children:String(r?k().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"N/A")})]}),(0,n.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,n.jsx)("div",{className:"bg-[#F39C12] h-2.5 rounded-full",style:{width:"".concat((()=>{if(!r)return 0;let e=new Date(r.created_at).getTime(),t=new Date(k()).getTime(),s=new Date().getTime();return s>=t?100:Math.min(Math.round((s-e)/(t-e)*100),100)})(),"%")}})}),(0,n.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,n.jsx)("span",{children:"Shipped"}),(0,n.jsx)("span",{children:"Estimated Delivery"})]})]})]})}),(0,n.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex items-center mb-4",children:[(0,n.jsx)(d.Fn3,{className:"text-blue-600 mr-3",size:20}),(0,n.jsx)("h3",{className:"text-lg font-medium",children:"Shipment Details"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm text-gray-600",children:"Package Count"}),(0,n.jsx)("p",{className:"font-medium",children:r.package_count||"1 Package"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm text-gray-600",children:"Package Type"}),(0,n.jsx)("p",{className:"font-medium",children:r.package_type||"Standard"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm text-gray-600",children:"Weight"}),(0,n.jsx)("p",{className:"font-medium",children:r.weight?"".concat(r.weight," kg"):"N/A"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm text-gray-600",children:"Dimensions"}),(0,n.jsx)("p",{className:"font-medium",children:r.dimensions||"N/A"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm text-gray-600",children:"Declared Value"}),(0,n.jsx)("p",{className:"font-medium",children:r.declared_value?"$".concat(r.declared_value):"N/A"})]})]}),r.contents&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h4",{className:"text-sm text-gray-600",children:"Package Contents"}),(0,n.jsx)("p",{className:"font-medium",children:r.contents})]})]})})]}),(0,n.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,n.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h3",{className:"text-lg font-medium",children:"Shipment Timeline"}),(0,n.jsxs)("button",{onClick:()=>b(!N),className:"text-blue-600 hover:text-blue-800 flex items-center text-sm",children:[(0,n.jsx)(d.dSq,{className:"mr-1"}),N?"Show Less":"View Full Timeline"]})]}),(0,n.jsx)("div",{className:"space-y-6",ref:w,children:E.map((e,t)=>{let s=t===y,a=t===y-1,i=t===y+1;if(!(N||s||a||i))return null;let l=t<y,c=t===y,d=t>y,o=e=>{let t=new Date;return t.setDate(t.getDate()+e),t.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0})},m=l?o(-5+t):c?o(0):"Estimated: ".concat(o(t-y+2)),x=s?"".concat(r.current_location_city||"Unknown",", ").concat(r.current_location_country||"Unknown"):e.includes("Origin")?"".concat(r.origin_city||"Unknown",", ").concat(r.origin_country||"Unknown"):e.includes("Transit")?"In Transit":"".concat(r.current_location_city||"Unknown",", ").concat(r.current_location_country||"Unknown");return(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center mr-4",children:[(0,n.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(l?"bg-green-500":c?"bg-blue-500":"bg-gray-300")}),t<E.length-1&&(0,n.jsx)("div",{className:"h-full w-0.5 bg-gray-200"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"px-3 py-1 rounded-md inline-block mb-1 ".concat(l?"bg-green-50 text-green-800":c?"bg-blue-50 text-blue-800":"bg-gray-50 text-gray-500"),children:(0,n.jsx)("span",{className:"text-sm font-medium",children:l?"Completed":c?"In Progress":"Pending"})}),(0,n.jsx)("h4",{className:"font-medium ".concat(d?"text-gray-400":"text-gray-800"),children:e}),(0,n.jsx)("p",{className:"text-sm ".concat(d?"text-gray-400":"text-gray-500"),children:m})]})]}),(l||c)&&x&&(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("span",{className:"inline-block w-4 h-4 mr-1 text-blue-500",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})}),(0,n.jsx)("span",{className:"font-medium ".concat(s?"text-blue-600":"text-gray-700"),children:x})]})})]},t)})}),!N&&E.length>3&&(0,n.jsx)("div",{className:"flex justify-center mt-4",children:(0,n.jsxs)("button",{onClick:()=>b(!0),className:"text-blue-600 hover:text-blue-800 flex items-center text-sm",children:[(0,n.jsx)(d.RiI,{className:"mr-1"}),"Show All ",E.length," Stages"]})}),N&&(0,n.jsx)("div",{className:"flex justify-center mt-4",children:(0,n.jsxs)("button",{onClick:()=>b(!1),className:"text-blue-600 hover:text-blue-800 flex items-center text-sm",children:[(0,n.jsx)(d.s$2,{className:"mr-1"}),"Show Less"]})})]})}),(0,n.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Shipment Documents"}),(0,n.jsx)("div",{className:"space-y-4",children:f.length>0?f.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[S(e.file_type),(0,n.jsx)("span",{children:"commercial_invoice"===e.document_type?"Commercial Invoice":"bill_of_lading"===e.document_type?"Bill of Lading":"packing_list"===e.document_type?"Packing List":e.file_name})]}),(0,n.jsxs)("a",{href:e.public_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[(0,n.jsx)("span",{className:"mr-1",children:"Download"}),(0,n.jsx)(d.aBF,{})]})]},e.id)):(0,n.jsx)("p",{className:"text-gray-500 text-center",children:"No documents available for this shipment"})})]})})]})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Track Your Shipment"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Enter your tracking number to get real-time updates on your shipment."})]}),(0,n.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8",children:[(0,n.jsxs)("form",{onSubmit:_,className:"flex flex-col md:flex-row gap-4",children:[(0,n.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),placeholder:"Enter tracking number",className:"flex-grow px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,n.jsx)("button",{type:"submit",disabled:m,className:"bg-[#F39C12] text-white px-6 py-2 rounded-md hover:bg-[#E67E22] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:m?"Tracking...":"Track"})]}),h&&(0,n.jsx)("div",{className:"mt-4 p-4 bg-red-50 text-red-700 rounded-md",children:h})]})]})})]})}}},function(e){e.O(0,[445,490,664,675,888,774,179],function(){return e(e.s=9634)}),_N_E=e.O()}]);